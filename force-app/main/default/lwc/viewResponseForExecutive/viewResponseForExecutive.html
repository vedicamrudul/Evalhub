<template>
    <div class="container">
        <!-- Loading Spinner -->
        <template if:true={loading}>
            <lightning-card>
                <div class="spinner-container slds-p-around_medium slds-text-align_center">
                    <lightning-spinner alternative-text="Loading" size="medium"></lightning-spinner>
                    <p class="slds-p-top_medium">Loading feedback responses...</p>
                </div>
            </lightning-card>
        </template>
        
        <!-- Error Display -->
        <template if:true={hasError}>
            <lightning-card>
                <div class="slds-p-around_medium slds-text-align_center error-message">
                    <lightning-icon icon-name="utility:error" alternative-text="Error" size="small" variant="error" class="slds-m-right_small"></lightning-icon>
                    <span>{error}</span>
                </div>
            </lightning-card>
        </template>
        
        <!-- User Info Section -->
        <template if:false={loading}>
            <lightning-card title="Employee Information" icon-name="standard:user">
                <div class="slds-p-around_medium">
                    <div class="slds-grid slds-gutters">
                        <div class="slds-col">
                            <div class="user-info-item">
                                <lightning-icon icon-name="standard:user" size="small" class="slds-m-right_small"></lightning-icon>
                                <p><strong>Name:</strong> {userData.name}</p>
                            </div>
                        </div>
                        <div class="slds-col">
                            <div class="user-info-item">
                                <lightning-icon icon-name="standard:team_member" size="small" class="slds-m-right_small"></lightning-icon>
                                <p><strong>Department:</strong> {userData.department}</p>
                            </div>
                        </div>
                    </div>
                </div>
            </lightning-card>
            
            <!-- Feedback Responses Section -->
            <template if:true={hasResponses}>
                <lightning-card title="Submitted Feedback Responses" icon-name="standard:feedback">
                    <div class="slds-p-around_medium">
                        <template for:each={feedbackResponses} for:item="feedbackItem">
                            <div key={feedbackItem.questionText} class="question-container">
                                <div class="question-text">
                                    <lightning-icon icon-name="utility:questions_and_answers" size="small" class="slds-m-right_small"></lightning-icon>
                                    {feedbackItem.questionText}
                                </div>
                                <div class="response-section">
                                    <div class="response-item">
                                        <template if:true={feedbackItem.isRating}>
                                            <div class="rating-display">
                                                <lightning-badge label={feedbackItem.answer} class="slds-m-right_small rating-badge"></lightning-badge>
                                                <div class="rating-visual">
                                                    <div class="rating-bar"></div>
                                                </div>
                                            </div>
                                        </template>
                                        <template if:false={feedbackItem.isRating}>
                                            <span class="response-value">{feedbackItem.answer}</span>
                                        </template>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </lightning-card>
            </template>
            
            <!-- No Responses Message -->
            <template if:false={hasResponses}>
                <template if:false={hasError}>
                    <lightning-card>
                        <div class="empty-state slds-p-around_medium slds-text-align_center">
                            <lightning-icon icon-name="utility:info" alternative-text="Information" size="medium" class="slds-m-bottom_small"></lightning-icon>
                            <h3 class="slds-text-heading_small">No Feedback Found</h3>
                            <p>No feedback responses have been submitted by this employee yet.</p>
                        </div>
                    </lightning-card>
                </template>
            </template>
        </template>
    </div>
</template>